# Настройка автоматического деплоя на Reg.ru через GitHub Actions

## Что это дает?

После настройки каждый раз, когда вы делаете `git push` в ветку `main`, сайт автоматически обновляется на Reg.ru.

---

## Шаг 1: Создание FTP-аккаунта на Reg.ru

1. Войдите в панель управления хостингом Reg.ru
2. Найдите раздел **"FTP-доступ"** или **"Учетные записи FTP"**
3. Создайте новый FTP-аккаунт или используйте существующий
4. Запишите данные:
   ```
   Сервер: ftp.amgautotrade.ru (или другой, указанный в панели)
   Логин: ваш_логин
   Пароль: ваш_пароль
   Папка: /public_html/
   ```

---

## Шаг 2: Добавление секретов в GitHub

1. Откройте репозиторий на GitHub: https://github.com/n4styaparfenova/amgautotrade

2. Перейдите в **Settings** (Настройки) репозитория

3. В левом меню выберите **Secrets and variables** → **Actions**

4. Нажмите **"New repository secret"** и добавьте три секрета:

   **Секрет 1:**
   - Name: `FTP_SERVER`
   - Value: `ftp.amgautotrade.ru` (или ваш FTP-сервер)

   **Секрет 2:**
   - Name: `FTP_USERNAME`
   - Value: ваш FTP логин

   **Секрет 3:**
   - Name: `FTP_PASSWORD`
   - Value: ваш FTP пароль

5. Сохраните все три секрета

---

## Шаг 3: Проверка работы автодеплоя

### Автоматическая проверка:

1. Сделайте любое изменение в коде (например, в index.html)
2. Закоммитьте изменения:
   ```bash
   git add .
   git commit -m "Test auto-deploy"
   git push
   ```

3. Перейдите на GitHub → вкладка **Actions**
4. Вы увидите запущенный workflow "Deploy to Reg.ru via FTP"
5. Дождитесь завершения (зеленая галочка ✓)
6. Проверьте сайт - изменения должны появиться

### Ручной запуск:

1. Перейдите на GitHub → вкладка **Actions**
2. Выберите workflow **"Deploy to Reg.ru via FTP"**
3. Нажмите **"Run workflow"** → выберите ветку `main` → **"Run workflow"**
4. Дождитесь завершения

---

## Шаг 4: Отключение GitHub Pages (опционально)

После переноса на Reg.ru можно отключить GitHub Pages:

1. GitHub → Settings репозитория
2. Pages → Source → выберите **None**
3. Save

Или оставьте как резервную копию.

---

## Возможные проблемы

### Ошибка: "FTP connection failed"

**Причина**: Неверные FTP данные или сервер недоступен

**Решение**:
1. Проверьте правильность FTP_SERVER, FTP_USERNAME, FTP_PASSWORD в GitHub Secrets
2. Убедитесь, что FTP-аккаунт активен в панели Reg.ru
3. Попробуйте подключиться через FileZilla с теми же данными

### Ошибка: "Permission denied"

**Причина**: Нет прав на запись в папку

**Решение**:
1. В панели Reg.ru проверьте права доступа к папке public_html
2. Убедитесь, что FTP-аккаунт имеет права на запись

### Workflow не запускается

**Причина**: Файл workflow не в ветке main

**Решение**:
1. Убедитесь, что файл `.github/workflows/deploy-regru.yml` есть в ветке main
2. Проверьте синтаксис YAML файла

---

## Что загружается на сервер?

Загружаются все файлы из репозитория, **КРОМЕ**:
- `.git/` и `.github/` (служебные папки GitHub)
- `node_modules/` (если есть)
- `DEPLOYMENT_GUIDE.md`, `README.md` (документация)
- `.DS_Store` (служебные файлы macOS)

Если нужно исключить другие файлы, отредактируйте секцию `exclude` в `.github/workflows/deploy-regru.yml`

---

## Альтернатива: Ручной деплой через FTP

Если автодеплой не нужен, можно загружать файлы вручную через FileZilla:

1. Скачайте FileZilla: https://filezilla-project.org/
2. Подключитесь к FTP с данными из Reg.ru
3. Перетащите файлы в папку `public_html/`

---

*Готово! Теперь ваш сайт будет автоматически обновляться при каждом push в main.*
